# ====================
# RESTIO PRODUCTION CONFIGURATION
# ====================
# This is an example production environment configuration.
# Copy this file to .env and update the values for your production environment.

# Application
APP_NAME=Restio
APP_ENV=production
APP_KEY=                        # Generate with: php artisan key:generate
APP_DEBUG=false                 # CRITICAL: Must be false in production
APP_URL=https://your-domain.com # Use HTTPS in production

APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

# Maintenance Mode
APP_MAINTENANCE_DRIVER=file
# APP_MAINTENANCE_STORE=database

# Security
BCRYPT_ROUNDS=12

# Logging
LOG_CHANNEL=stack
LOG_STACK=daily              # Use daily rotation in production
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=error              # Only log errors in production (not debug/info)

# Database (PostgreSQL recommended for production)
DB_CONNECTION=pgsql
DB_HOST=127.0.0.1
DB_PORT=5432
DB_DATABASE=restio_production
DB_USERNAME=restio_user
DB_PASSWORD=                 # Use strong password

# Session Configuration (CRITICAL FOR SECURITY)
SESSION_DRIVER=redis         # Use redis for better performance
SESSION_LIFETIME=120         # Session timeout in minutes
SESSION_ENCRYPT=true         # Encrypt session data
SESSION_PATH=/
SESSION_DOMAIN=.your-domain.com  # Set to your domain
SESSION_SECURE_COOKIE=true   # CRITICAL: Only send cookies over HTTPS
SESSION_HTTP_ONLY=true       # Prevent JavaScript access to cookies
SESSION_SAME_SITE=lax        # CSRF protection

# Broadcasting
BROADCAST_CONNECTION=log

# Filesystem
FILESYSTEM_DISK=s3           # Use S3 for production file storage

# Queue Configuration
QUEUE_CONNECTION=redis       # Use redis for production queues

# Cache Configuration
CACHE_STORE=redis            # Use redis for production caching
# CACHE_PREFIX=restio_

# Redis Configuration (Required for sessions, cache, and queues)
REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null          # Set if Redis requires authentication
REDIS_PORT=6379

# Mail Configuration
MAIL_MAILER=smtp
MAIL_SCHEME=tls
MAIL_HOST=smtp.sendgrid.net  # Or your preferred mail service
MAIL_PORT=587
MAIL_USERNAME=               # Your mail service username
MAIL_PASSWORD=               # Your mail service password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="noreply@your-domain.com"
MAIL_FROM_NAME="${APP_NAME}"

# AWS S3 Configuration (for file storage)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=restio-production
AWS_USE_PATH_STYLE_ENDPOINT=false

# Vite
VITE_APP_NAME="${APP_NAME}"

# Stripe (LIVE MODE FOR PRODUCTION)
STRIPE_KEY=pk_live_           # Your Stripe LIVE publishable key
STRIPE_SECRET=sk_live_        # Your Stripe LIVE secret key
STRIPE_WEBHOOK_SECRET=        # Your Stripe webhook secret
STRIPE_FAKE_MODE=false        # CRITICAL: Must be false for production

# Error Tracking (Sentry - optional but recommended)
SENTRY_LARAVEL_DSN=           # Your Sentry DSN for error tracking

# ====================
# DEPLOYMENT CHECKLIST
# ====================
# Before deploying to production:
#
# 1. Security:
#    ☐ APP_DEBUG=false
#    ☐ SESSION_SECURE_COOKIE=true
#    ☐ SESSION_ENCRYPT=true
#    ☐ Strong APP_KEY generated
#    ☐ Strong database password
#    ☐ STRIPE_FAKE_MODE=false
#    ☐ Force HTTPS in web server config
#
# 2. Performance:
#    ☐ SESSION_DRIVER=redis
#    ☐ CACHE_STORE=redis
#    ☐ QUEUE_CONNECTION=redis
#    ☐ Redis server configured and running
#
# 3. Database:
#    ☐ PostgreSQL configured
#    ☐ Database backups scheduled
#    ☐ Run migrations: php artisan migrate --force
#
# 4. Optimization:
#    ☐ Run: composer install --optimize-autoloader --no-dev
#    ☐ Run: npm run build
#    ☐ Run: php artisan config:cache
#    ☐ Run: php artisan route:cache
#    ☐ Run: php artisan view:cache
#
# 5. Queue Workers:
#    ☐ Configure supervisord for queue workers
#    ☐ Start workers: php artisan queue:work redis --sleep=3 --tries=3
#
# 6. Scheduled Tasks:
#    ☐ Add to cron: * * * * * cd /path-to-app && php artisan schedule:run >> /dev/null 2>&1
#
# 7. Monitoring:
#    ☐ Error tracking configured (Sentry)
#    ☐ Application monitoring configured (Laravel Pulse)
#    ☐ Uptime monitoring configured
#    ☐ Log rotation configured
#
# 8. Mail:
#    ☐ Mail service configured and tested
#    ☐ Email templates tested
#
# 9. Stripe:
#    ☐ Stripe live keys configured
#    ☐ Webhook endpoints configured
#    ☐ Test payment flow end-to-end
#
# 10. SSL/HTTPS:
#     ☐ SSL certificate installed
#     ☐ Force HTTPS in web server
#     ☐ HSTS headers enabled (automatic via AddSecurityHeaders middleware)
